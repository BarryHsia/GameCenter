---
inclusion: always
---

# Git 提交工作流（精简版）

## 核心规则

**代码修改必须同时更新 CHANGELOG.md**

### 何时更新 CHANGELOG

✅ 需要：Bug修复、新功能、重构、优化、安全修复
❌ 无需：纯文档、格式化、依赖更新

### 提交流程

1. 修改代码
2. 更新 `docs/CHANGELOG.md`（在 `---` 后添加条目）

## CHANGELOG 格式

### 条目格式规范

**最新提交（当前正在进行的提交）**:
```markdown
## YYYY-MM-DD HH:MM | [本次提交] | 类型：描述
```

**历史提交（已完成的提交）**:
```markdown
## YYYY-MM-DD HH:MM | commit_hash | 类型：描述
```

### 类型前缀

- `新增:` 新功能
- `修复:` Bug修复
- `重构:` 代码重构
- `优化:` 性能优化
- `安全:` 安全修复
- `测试:` 测试相关
- `文档:` 重要文档

### 示例

```markdown
## 2026-02-12 22:55 | [本次提交] | 优化：添加网络超时配置、日志脱敏

## 2026-02-12 22:45 | b907395 | 安全：实现 Room 数据库 SQLCipher 加密

## 2026-02-11 20:30 | c8c210f | 新增：Pre-Commit 质量检查 Hook
```

### 规则

- ✅ 时间倒序（最新在上）
- ✅ 描述不超过30字
- ✅ 条目间空一行
- ✅ **只有最新的提交使用 `[本次提交]`**
- ✅ **历史提交必须使用 commit hash（前7位）**
- ❌ 不要在历史提交中使用 `[本次提交]`

## Commit 信息规范

- `feat:` 新功能
- `fix:` Bug修复
- `refactor:` 重构
- `perf:` 性能优化
- `docs:` 文档
- `test:` 测试
- `chore:` 构建/工具

## 工作流检查清单

修改代码时必须检查：

- [ ] 代码修改已完成
- [ ] CHANGELOG.md 已更新
- [ ] 最新条目使用 `[本次提交]` 标记
- [ ] 历史条目使用 commit hash
- [ ] 时间戳准确（YYYY-MM-DD HH:MM 格式）
- [ ] 描述简洁（不超过30字）
- [ ] 条目间有空行分隔
